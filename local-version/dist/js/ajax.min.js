function ajax(e){function t(){var e,t;if(c){if("string"==typeof c){c=c.split("&");for(var n=0,o=c.length;n<o;n++)e=c[n].split("=")[0],t=c[n].split("=")[1],c[n]=encodeURIComponent(e)+"="+encodeURIComponent(t);c=c.replace("/%20/g","+")}else if("object"==typeof c){var i=[];for(var e in c){var t=c[e].toString();e=encodeURIComponent(e),t=encodeURIComponent(t),i.push(e+"="+t)}c=i.join("&").replace("/%20/g","+")}"get"!==a&&"jsonp"!==u||(r+=r.indexOf("?")>-1?c:"?"+c)}}function n(){var e=document.createElement("script"),t=(new Date).getTime()+Math.round(1e3*Math.random()),n="JSONP_"+t;window[n]=function(t){clearTimeout(y),document.body.removeChild(e),m(t)},e.src=r+(r.indexOf("?")>-1?"":"?")+"callback="+n,e.type="text/javascript",document.body.appendChild(e),o(n,e)}function o(e,t){void 0!==l&&(y=setTimeout(function(){"jsonp"===u?(delete window[e],document.body.removeChild(t)):(v=!0,w&&w.abort()),console.log("timeout")},l))}function i(){function e(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var e=["Microsoft","msxm3","msxml2","msxml1"],t=0;t<e.length;t++)try{var n=e[t]+".XMLHTTP";return new ActiveXObject(n)}catch(e){}}w=e(),w.open(a,r,d),"post"!==a||s?s&&w.setRequestHeader("Content-Type",s):w.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),w.onreadystatechange=function(){if(4===w.readyState){if(void 0!==l){if(v)return;clearTimeout(y)}w.status>=200&&w.status<300||304==w.status?m(w.responseText):f(w.status,w.statusText)}},w.send("get"===a?null:c),o()}var r=e.url||"",a=(e.type||"get").toLowerCase(),c=e.data||null,s=e.contentType||"",u=e.dataType||"",d=void 0===e.async&&!0,l=e.timeOut,p=e.before||function(){},f=e.error||function(){},m=e.success||function(){},v=!1,y=null,w=null;t(),p(),"jsonp"===u?n():i()}
function loadArticle(e){var t=document.querySelector(".article-pic"),n=t.getElementsByTagName("img")[0],o=t.getElementsByTagName("span")[0],i=t.getElementsByTagName("em")[0],c=document.querySelector(".article-content"),s=document.querySelector(".comments"),l=document.querySelector(".likes");n.src=e.image,o.innerHTML=e.title,i.innerHTML=e.image_source,c.innerHTML=e.body,s.innerHTML=e.extra.comments,l.innerHTML=e.extra.popularity,localStorage.getItem(newsid+"islike")&&l.previousSibling.classList.add("islike")}window.onload=function(){var e=!0,t=window.location.search.match(/[\?\&]newsid=([^\&]+)/i)[0];newsid=t.split("=")[1],ajax({url:"/zhihudaily/local-version/json/"+newsid+".json",type:"GET",success:function(e){e=JSON.parse(e),loadArticle(e)},error:function(e){console.log(e)}});var n=document.querySelector(".share");n.onclick=function(e){var t=document.querySelector(".mask"),n=document.querySelector(".share-box");t.classList.remove("hide"),n.classList.add("show"),n.addEventListener("click",function(e){e.stopPropagation()},!1),t.addEventListener("click",function(){t.classList.add("hide"),n.classList.remove("show")},!1)},function(){var e=document.querySelector(".share-box"),t=e.querySelectorAll("a");Array.from(t).forEach(function(e,t){e.addEventListener("click",function(e){var n=e||window.event;switch(t){case 0:window.open("http://v.t.sina.com.cn/share/share.php?url="+window.location.href+"&title="+document.title,"分享到微博",target="_blank");break;case 1:console.log("我是微信，我被点了");break;case 2:window.location.href="https://github.com/ntnyq";break;case 3:window.open("http://share.v.t.qq.com/index.php?c=share&a=index&title= "+document.title+" &pic= "+document.querySelector("img")+"&url="+window.location.href,"分享到腾讯微博",target="_blank");break;case 4:console.log("我是有道云笔记，我被点了");break;case 5:window.open("http://connect.qq.com/widget/shareqq/index.html?url="+window.location.href+"&title= "+document.title+"&desc=分享给QQ好友&pics="+document.querySelector("img"),"分享给QQ好友",target="_blank");break;case 6:console.log("我是更多平台，我被点了");break;default:console.log("你猜我能被点到吗？")}n.preventDefault()},!1)})}(),function(){var e=document.querySelector(".like"),t=document.querySelector(".likes"),n=e.querySelector("i");e.addEventListener("click",function(){if(n.classList.contains("islike"))n.classList.remove("islike"),t.innerHTML=parseInt(t.innerHTML)-1;else{n.classList.add("islike"),t.innerHTML=parseInt(t.innerHTML)+1,localStorage.setItem(newsid+"islike","1");var e=document.createElement("div");e.className="toolTip",e.innerHTML='<i class="fa fa-thumbs-up"></i><sapn>'+t.innerHTML+"+1</sapn>",document.body.appendChild(e),setTimeout(function(){document.body.removeChild(e)},800)}},!1)}(),function(){var t=document.querySelector(".collect");icon=t.querySelector("i");var n;localStorage.getItem("newsids")?(n=localStorage.getItem("newsids").split("-"),n.indexOf(newsid)>0&&(icon.classList.contains("collected")?"":icon.classList.add("collected"))):n=[],e&&t.addEventListener("click",function(){icon.classList.contains("collected")?(icon.classList.remove("collected"),n.splice(n.indexOf(newsid),1),0===n.length?localStorage.removeItem("newsids"):localStorage.setItem("newsids",n.join("-"))):(icon.classList.add("collected"),n.indexOf(newsid)<0&&(n.push(newsid),localStorage.setItem("newsids",n.join("-"))))},!1)}()};